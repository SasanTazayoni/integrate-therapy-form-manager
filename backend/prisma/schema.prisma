generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Client {
  id               String    @id @default(uuid())
  email            String    @unique
  name             String?
  dob              DateTime?
  status           String    @default("active")
  inactivated_at   DateTime?
  delete_inactive  DateTime?
  created_at       DateTime  @default(now())
  updated_at       DateTime  @updatedAt
  forms            Form[]

  @@index([status, delete_inactive])
}

model Form {
  id               String    @id @default(uuid())
  client           Client    @relation(fields: [clientId], references: [id])
  clientId         String
  form_type        String
  token            String    @unique
  token_sent_at    DateTime
  token_expires_at DateTime
  is_active        Boolean   @default(true)
  submitted_at     DateTime?
  revoked_at       DateTime?
  bdi_score        String?
  bai_score        String?
  ysq_ed_score     String?
  ysq_ab_score     String?
  ysq_ma_score     String?
  ysq_si_score     String?
  ysq_ds_score     String?
  ysq_fa_score     String?
  ysq_di_score     String?
  ysq_vu_score     String?
  ysq_eu_score     String?
  ysq_sb_score     String?
  ysq_ss_score     String?
  ysq_ei_score     String?
  ysq_us_score     String?
  ysq_et_score     String?
  ysq_is_score     String?
  ysq_as_score     String?
  ysq_np_score     String?
  ysq_pu_score     String?
  ysq_ed_456       String?
  ysq_ab_456       String?
  ysq_ma_456       String?
  ysq_si_456       String?
  ysq_ds_456       String?
  ysq_fa_456       String?
  ysq_di_456       String?
  ysq_vu_456       String?
  ysq_eu_456       String?
  ysq_sb_456       String?
  ysq_ss_456       String?
  ysq_ei_456       String?
  ysq_us_456       String?
  ysq_et_456       String?
  ysq_is_456       String?
  ysq_as_456       String?
  ysq_np_456       String?
  ysq_pu_456       String?
  smi_dp_score     String?
  smi_dss_score    String?
  smi_ba_score     String?
  smi_sa_score     String?
  smi_cs_score     String?
  smi_ic_score     String?
  smi_uc_score     String?
  smi_cc_score     String?
  smi_vc_score     String?
  smi_dc_score     String?
  smi_pp_score     String?
  smi_ac_score     String?
  smi_ec_score     String?
  smi_ha_score     String?
  created_at       DateTime  @default(now())
  updated_at       DateTime  @updatedAt
}

model ActivityLog {
  id           String   @id @default(uuid())
  event_type   String
  timestamp    DateTime @default(now())
  client_email String
  notes        String?
  created_at   DateTime @default(now())
}
